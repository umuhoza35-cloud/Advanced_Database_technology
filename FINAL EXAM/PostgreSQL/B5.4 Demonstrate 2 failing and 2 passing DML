-- Show committed payments (only valid ones)
SELECT 
    payment_id,
    fine_id,
    amount,
    payment_method,
    reference_number,
    'Within business limits' as validation_status
FROM Payment
WHERE reference_number LIKE 'TEST-PASS%'
ORDER BY payment_id DESC;

-- Show committed fines (only valid ones)
SELECT 
    fine_id,
    violation_id,
    amount,
    status,
    'Within business limits' as validation_status
FROM Fine
WHERE amount <= (SELECT threshold FROM BUSINESS_LIMITS WHERE rule_key = 'MAX_FINE_AMOUNT')
ORDER BY fine_id DESC
LIMIT 5;

-- Summary
SELECT 
    'Business Rule Enforcement' as check_type,
    COUNT(*) as total_rules,
    SUM(CASE WHEN active = 'Y' THEN 1 ELSE 0 END) as active_rules,
    'All limits enforced via triggers' as status
FROM BUSINESS_LIMITS;
